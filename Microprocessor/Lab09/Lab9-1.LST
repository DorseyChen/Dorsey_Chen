A51 MACRO ASSEMBLER  LAB9_1                                                               12/11/2018 13:03:32 PAGE     1


MACRO ASSEMBLER A51 V8.01
OBJECT MODULE PLACED IN Lab9-1.OBJ
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE Lab9-1.asm SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

0000                   1             ORG     00H
0000 8003              2             JMP     INITIAL
0003                   3             ORG     03H
0003 800C              4             JMP     INTERRUPT
0005                   5     INITIAL:
0005 D288              6             SETB    IT0                ;外部中斷P3.2設為edge trigger        
0007 75A881            7             MOV     IE,#10000001B              ;interrupt enable EA=1,EX0=1         
000A 7C00              8             MOV     R4,#0                      ;計算中斷次數用
000C 900075            9             MOV     DPTR,#TABLE0          ;第一個字的table
000F                  10     WAIT:
000F 80FE             11             JMP     WAIT                   ;一個無限循環的空loop    
0011                  12     INTERRUPT:                     ;中斷程式
0011 BC0506           13             CJNE    R4,#5,J1           ;如果中斷次數＝5次
0014 9000BD           14             MOV     DPTR,#TABLE1                    ;放入第1個字的table
0017 0C               15             INC     R4                     ;紀縣刈_次數+1   
0018 8038             16             JMP     LOOP                   ;跳去顯示字      
001A                  17     J1:
001A BC0A06           18             CJNE    R4,#10,J2          ;如果中斷次數＝10次
001D 900105           19             MOV     DPTR,#TABLE2            ;放入第2個字的table             
0020 0C               20             INC     R4                         ;紀縣刈_次數+1       
0021 802F             21             JMP     LOOP                    ;跳去顯示字     
0023                  22     J2:
0023 BC0F06           23             CJNE    R4,#15,J3          ;邏輯同上    
0026 90014D           24             MOV     DPTR,#TABLE3       
0029 0C               25             INC     R4
002A 8026             26             JMP     LOOP
002C                  27     J3:
002C BC1406           28             CJNE    R4,#20,J4          ;邏輯同上    
002F 900195           29             MOV     DPTR,#TABLE4
0032 0C               30             INC     R4
0033 801D             31             JMP     LOOP
0035                  32     J4:
0035 BC1906           33             CJNE    R4,#25,J5          ;邏輯同上    
0038 9001DD           34             MOV     DPTR,#TABLE5
003B 0C               35             INC     R4
003C 8014             36             JMP     LOOP
003E                  37     J5:
003E BC1E06           38             CJNE    R4,#30,BACK        ;邏輯同上    
0041 900225           39             MOV     DPTR,#TABLE6       
0044 0C               40             INC     R4
0045 800B             41             JMP     LOOP
0047                  42     BACK:
0047 BC2307           43             CJNE    R4,#35,FIRST        ;如果中斷次數＝35次
004A 900075           44             MOV     DPTR,#TABLE0                    ;放入第0個字的table
004D 7C00             45             MOV     R4,#0                           ;中斷次數歸0            
004F 8001             46             JMP     LOOP                            ;跳去顯示字     
0051                  47     FIRST:
0051 0C               48             INC     R4                 
0052                  49     LOOP:                                                   ;顯示字      
0052 7847             50             MOV     R0,#71                          ;一個字有72*8bit組成
0054 7918             51             MOV     R1,#24                          ;顯示24次
0056                  52     NEXT_COLUMN:                    ;一次顯示3*8bit的燈     
0056 1167             53             CALL    READ_BYTE               
0058 F580             54             MOV     P0,A
005A 1167             55             CALL    READ_BYTE
005C F5A0             56             MOV     P2,A
005E 1167             57             CALL    READ_BYTE
0060 F590             58             MOV     P1,A
A51 MACRO ASSEMBLER  LAB9_1                                                               12/11/2018 13:03:32 PAGE     2

0062 116C             59             CALL    DELAY             ;短暫的delay視覺暫留          
0064 D9F0             60             DJNZ    R1,NEXT_COLUMN
0066 32               61             RETI                     ;一個字顯示完畢跳回WAIT                
                      62                                   ;等待下次interrupt        
                      63     
0067                  64     READ_BYTE:                    ;讀取table用
0067 E8               65             MOV     A,R0                    
0068 93               66             MOVC    A,@A+DPTR
0069 F4               67             CPL     A
006A 18               68             DEC     R0
006B 22               69             RET
006C                  70     DELAY:
006C 7E46             71             MOV     R6,#70
006E                  72     DELAY1:
006E 7F46             73             MOV     R7,#70
0070                  74     DELAY2:
0070 DFFE             75             DJNZ    R7,DELAY2
0072 DEFA             76             DJNZ    R6,DELAY1
0074 22               77             RET
                      78     
0075                  79     TABLE0:
0075 000000           80                     DB      0000000B,00000000B,00000000B
0078 01FFE0           81             DB      0000001B,11111111B,11100000B
007B 07FFF8           82             DB      0000111B,11111111B,11111000B
007E 0FFFFC           83             DB      0001111B,11111111B,11111100B
0081 0F003C           84             DB      0001111B,00000000B,00111100B
0084 0C000C           85             DB      0001100B,00000000B,00001100B
0087 0C000C           86             DB      0001100B,00000000B,00001100B
008A 0F807C           87             DB      0001111B,10000000B,01111100B
008D 0FFFFC           88             DB      0001111B,11111111B,11111100B
0090 07FFF8           89             DB      0000111B,11111111B,11111000B
0093 00FFC0           90             DB      0000000B,11111111B,11000000B
0096 000000           91             DB      0000000B,00000000B,00000000B
0099 000000           92             DB      0000000B,00000000B,00000000B
009C 000000           93             DB      0000000B,00000000B,00000000B
009F 000000           94             DB      0000000B,00000000B,00000000B
00A2 000000           95             DB      0000000B,00000000B,00000000B
00A5 000000           96             DB      0000000B,00000000B,00000000B
00A8 000000           97             DB      0000000B,00000000B,00000000B
00AB 000000           98             DB      0000000B,00000000B,00000000B
00AE 000000           99             DB      0000000B,00000000B,00000000B
00B1 000000          100             DB      0000000B,00000000B,00000000B
00B4 000000          101             DB      0000000B,00000000B,00000000B
00B7 000000          102             DB      0000000B,00000000B,00000000B
00BA 000000          103             DB      0000000B,00000000B,00000000B
00BD                 104     TABLE1:
00BD 01FC60          105             DB      0000001B,11111100B,01100000B
00C0 07FE78          106                     DB      0000111B,11111110B,01111000B
00C3 0FFF0C          107                     DB      0001111B,11111111B,00001100B
00C6 0F070C          108                     DB      0001111B,00000111B,00001100B
00C9 0C030E          109                     DB      0001100B,00000011B,00001110B
00CC 0C030E          110                     DB      0001100B,00000011B,00001110B
00CF 0C030E          111                     DB      0001100B,00000011B,00001110B
00D2 0E073C          112                     DB      0001110B,00000111B,00111100B
00D5 0FFFFC          113                     DB      0001111B,11111111B,11111100B
00D8 07FFE0          114                     DB      0000111B,11111111B,11100000B
00DB 01FFC0          115                     DB      0000001B,11111111B,11000000B
00DE 000000          116             DB      0000000B,00000000B,00000000B
00E1 000000          117             DB      0000000B,00000000B,00000000B
00E4 000000          118             DB      0000000B,00000000B,00000000B
00E7 000000          119             DB      0000000B,00000000B,00000000B
00EA 000000          120             DB      0000000B,00000000B,00000000B
00ED 000000          121             DB      0000000B,00000000B,00000000B
00F0 000000          122             DB      0000000B,00000000B,00000000B
00F3 000000          123             DB      0000000B,00000000B,00000000B
00F6 000000          124             DB      0000000B,00000000B,00000000B
A51 MACRO ASSEMBLER  LAB9_1                                                               12/11/2018 13:03:32 PAGE     3

00F9 000000          125             DB      0000000B,00000000B,00000000B
00FC 000000          126             DB      0000000B,00000000B,00000000B
00FF 000000          127             DB      0000000B,00000000B,00000000B
0102 000000          128             DB      0000000B,00000000B,00000000B
0105                 129     TABLE2:
0105 080000          130             DB      0001000B,00000000B,00000000B
0108 080000          131             DB      0001000B,00000000B,00000000B
010B 0FFFFC          132                     DB      0001111B,11111111B,11111100B
010E 0FFFFC          133                     DB      0001111B,11111111B,11111100B
0111 0FFFF8          134                     DB      0001111B,11111111B,11111000B
0114 080008          135                     DB      0001000B,00000000B,00001000B
0117 080008          136                     DB      0001000B,00000000B,00001000B
011A 000000          137                     DB      0000000B,00000000B,00000000B
011D 000000          138                     DB      0000000B,00000000B,00000000B
0120 000000          139             DB      0000000B,00000000B,00000000B
0123 000000          140             DB      0000000B,00000000B,00000000B
0126 000000          141             DB      0000000B,00000000B,00000000B
0129 000000          142             DB      0000000B,00000000B,00000000B
012C 000000          143             DB      0000000B,00000000B,00000000B
012F 000000          144             DB      0000000B,00000000B,00000000B
0132 000000          145             DB      0000000B,00000000B,00000000B
0135 000000          146             DB      0000000B,00000000B,00000000B
0138 000000          147             DB      0000000B,00000000B,00000000B
013B 000000          148             DB      0000000B,00000000B,00000000B
013E 000000          149             DB      0000000B,00000000B,00000000B
0141 000000          150             DB      0000000B,00000000B,00000000B
0144 000000          151             DB      0000000B,00000000B,00000000B
0147 000000          152             DB      0000000B,00000000B,00000000B
014A 000000          153             DB      0000000B,00000000B,00000000B
014D                 154     TABLE3:
014D 000000          155                     DB      0000000B,00000000B,00000000B
0150 01FFE0          156             DB      0000001B,11111111B,11100000B
0153 07FFF8          157             DB      0000111B,11111111B,11111000B
0156 0FFFFC          158             DB      0001111B,11111111B,11111100B
0159 0F003C          159             DB      0001111B,00000000B,00111100B
015C 080004          160             DB      0001000B,00000000B,00000100B
015F 0C000C          161             DB      0001100B,00000000B,00001100B
0162 0F807C          162             DB      0001111B,10000000B,01111100B
0165 0FFFFC          163             DB      0001111B,11111111B,11111100B
0168 07FFF8          164             DB      0000111B,11111111B,11111000B
016B 00FFC0          165             DB      0000000B,11111111B,11000000B
016E 000000          166             DB      0000000B,00000000B,00000000B
0171 000000          167             DB      0000000B,00000000B,00000000B
0174 000000          168             DB      0000000B,00000000B,00000000B
0177 000000          169             DB      0000000B,00000000B,00000000B
017A 000000          170             DB      0000000B,00000000B,00000000B
017D 000000          171             DB      0000000B,00000000B,00000000B
0180 000000          172             DB      0000000B,00000000B,00000000B
0183 000000          173             DB      0000000B,00000000B,00000000B
0186 000000          174             DB      0000000B,00000000B,00000000B
0189 000000          175             DB      0000000B,00000000B,00000000B
018C 000000          176             DB      0000000B,00000000B,00000000B
018F 000000          177             DB      0000000B,00000000B,00000000B
0192 000000          178             DB      0000000B,00000000B,00000000B
0195                 179     TABLE4:
0195 000000          180             DB      0000000B,00000000B,00000000B
0198 03E370          181             DB      0000011B,11100011B,01110000B
019B 07F7F8          182             DB      0000111B,11110111B,11111000B
019E 0FFFFC          183             DB      0001111B,11111111B,11111100B
01A1 088C4C          184             DB      0001000B,10001100B,01001100B
01A4 080C04          185             DB      0001000B,00001100B,00000100B
01A7 080C04          186             DB      0001000B,00001100B,00000100B
01AA 0C0F9C          187             DB      0001100B,00001111B,10011100B
01AD 0FFFFC          188             DB      0001111B,11111111B,11111100B
01B0 07FBF8          189             DB      0000111B,11111011B,11111000B
01B3 03F3F0          190             DB      0000011B,11110011B,11110000B
A51 MACRO ASSEMBLER  LAB9_1                                                               12/11/2018 13:03:32 PAGE     4

01B6 000000          191             DB      0000000B,00000000B,00000000B
01B9 000000          192             DB      0000000B,00000000B,00000000B
01BC 000000          193             DB      0000000B,00000000B,00000000B
01BF 000000          194             DB      0000000B,00000000B,00000000B
01C2 000000          195             DB      0000000B,00000000B,00000000B
01C5 000000          196             DB      0000000B,00000000B,00000000B
01C8 000000          197             DB      0000000B,00000000B,00000000B
01CB 000000          198             DB      0000000B,00000000B,00000000B
01CE 000000          199             DB      0000000B,00000000B,00000000B
01D1 000000          200             DB      0000000B,00000000B,00000000B
01D4 000000          201             DB      0000000B,00000000B,00000000B
01D7 000000          202             DB      0000000B,00000000B,00000000B
01DA 000000          203             DB      0000000B,00000000B,00000000B
                     204     
                     205     
01DD                 206     TABLE5:
01DD 03F0F0          207             DB      0000011B,11110000B,11110000B
01E0 07FBF8          208                     DB      0000111B,11111011B,11111000B
01E3 0FFBFC          209                     DB      0001111B,11111011B,11111100B
01E6 0C0F9C          210                     DB      0001100B,00001111B,10011100B
01E9 080404          211                     DB      0001000B,00000100B,00000100B
01EC 080404          212                     DB      0001000B,00000100B,00000100B
01EF 08844C          213                     DB      0001000B,10000100B,01001100B
01F2 0FC0FC          214                     DB      0001111B,11000000B,11111100B
01F5 07C0F8          215                     DB      0000111B,11000000B,11111000B
01F8 03C070          216                     DB      0000011B,11000000B,01110000B
01FB 000000          217                     DB      0000000B,00000000B,00000000B
01FE 000000          218             DB      0000000B,00000000B,00000000B
0201 000000          219             DB      0000000B,00000000B,00000000B
0204 000000          220             DB      0000000B,00000000B,00000000B
0207 000000          221             DB      0000000B,00000000B,00000000B
020A 000000          222             DB      0000000B,00000000B,00000000B
020D 000000          223             DB      0000000B,00000000B,00000000B
0210 000000          224             DB      0000000B,00000000B,00000000B
0213 000000          225             DB      0000000B,00000000B,00000000B
0216 000000          226             DB      0000000B,00000000B,00000000B
0219 000000          227             DB      0000000B,00000000B,00000000B
021C 000000          228             DB      0000000B,00000000B,00000000B
021F 000000          229             DB      0000000B,00000000B,00000000B
0222 000000          230             DB      0000000B,00000000B,00000000B 
0225                 231     TABLE6:
0225 00000C          232             DB      0000000B,00000000B,00001100B
0228 00003C          233                     DB      0000000B,00000000B,00111100B
022B 00007C          234                     DB      0000000B,00000000B,01111100B
022E 0003EC          235                     DB      0000000B,00000011B,11101100B
0231 0FFFCC          236                     DB      0001111B,11111111B,11001100B
0234 0FFE0C          237                     DB      0001111B,11111110B,00001100B
0237 0FF80C          238                     DB      0001111B,11111000B,00001100B
023A 07000C          239                     DB      0000111B,00000000B,00001100B
023D 00001C          240                     DB      0000000B,00000000B,00011100B
0240 00007C          241                     DB      0000000B,00000000B,01111100B
0243 00007C          242                     DB      0000000B,00000000B,01111100B
0246 000000          243                     DB      0000000B,00000000B,00000000B
0249 000000          244             DB      0000000B,00000000B,00000000B
024C 000000          245             DB      0000000B,00000000B,00000000B
024F 000000          246             DB      0000000B,00000000B,00000000B
0252 000000          247             DB      0000000B,00000000B,00000000B
0255 000000          248             DB      0000000B,00000000B,00000000B
0258 000000          249             DB      0000000B,00000000B,00000000B
025B 000000          250             DB      0000000B,00000000B,00000000B
025E 000000          251             DB      0000000B,00000000B,00000000B
0261 000000          252             DB      0000000B,00000000B,00000000B
0264 000000          253             DB      0000000B,00000000B,00000000B
0267 000000          254             DB      0000000B,00000000B,00000000B
026A 000000          255             DB      0000000B,00000000B,00000000B
                     256     
A51 MACRO ASSEMBLER  LAB9_1                                                               12/11/2018 13:03:32 PAGE     5

                     257             
                     258     END
A51 MACRO ASSEMBLER  LAB9_1                                                               12/11/2018 13:03:32 PAGE     6

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

BACK . . . . . . .  C ADDR   0047H   A   
DELAY. . . . . . .  C ADDR   006CH   A   
DELAY1 . . . . . .  C ADDR   006EH   A   
DELAY2 . . . . . .  C ADDR   0070H   A   
FIRST. . . . . . .  C ADDR   0051H   A   
IE . . . . . . . .  D ADDR   00A8H   A   
INITIAL. . . . . .  C ADDR   0005H   A   
INTERRUPT. . . . .  C ADDR   0011H   A   
IT0. . . . . . . .  B ADDR   0088H.0 A   
J1 . . . . . . . .  C ADDR   001AH   A   
J2 . . . . . . . .  C ADDR   0023H   A   
J3 . . . . . . . .  C ADDR   002CH   A   
J4 . . . . . . . .  C ADDR   0035H   A   
J5 . . . . . . . .  C ADDR   003EH   A   
LOOP . . . . . . .  C ADDR   0052H   A   
NEXT_COLUMN. . . .  C ADDR   0056H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
READ_BYTE. . . . .  C ADDR   0067H   A   
TABLE0 . . . . . .  C ADDR   0075H   A   
TABLE1 . . . . . .  C ADDR   00BDH   A   
TABLE2 . . . . . .  C ADDR   0105H   A   
TABLE3 . . . . . .  C ADDR   014DH   A   
TABLE4 . . . . . .  C ADDR   0195H   A   
TABLE5 . . . . . .  C ADDR   01DDH   A   
TABLE6 . . . . . .  C ADDR   0225H   A   
WAIT . . . . . . .  C ADDR   000FH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
