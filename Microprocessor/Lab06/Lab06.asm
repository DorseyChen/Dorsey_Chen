	ORG		0000H
	JMP		LED_SHOW
	ORG		0050H
LED_SHOW:
	JB P3.2,LED_SHOW 	//查看傾斜開關有無搖晃
	MOV R0,#72			//將72移到R0，從陣列的最後一個開始	
	MOV DPTR,#TABLE	//設定陣列	
	MOV R1,#24			//設定24次延遲counter
NEXT_COLUMN:
	CALL READ_BYTE		//轉換R0的值
	MOV P0,A			//顯示到P0
	CALL READ_BYTE
	MOV P2,A			//顯示到P2
	CALL READ_BYTE
	MOV P1,A			//顯示到P1
	CALL DELAY
	DJNZ R1,NEXT_COLUMN	// 如果R1!=24則再跑一次延長顯示
	JMP	LED_SHOW		//跳到開頭從新開始 	
READ_BYTE:		  
	DJNZ R0,FILL		//看R0是不是0
	MOV R0,#72			//重置R0
	RET
FILL:
	MOV A,R0			//將R0放到A當作目前要顯示的資料順序
	MOVC A,@A+DPTR
	CPL A				//反轉A配合LED燈	
	RET
;---------------------------------------
TABLE:
	DB 00000000B,00000000B,00000000B
	DB 00000000B,00001100B,00000000B
	DB 00000000B,00001100B,01100000B
	DB 00000000B,00001100B,01100000B
	DB 00000000B,00001100B,01100000B	
	DB 00111111B,11111111B,11100000B
	DB 00111111B,11111111B,11100000B
	DB 00000000B,00001100B,01100000B
	DB 00000000B,00001100B,01100000B
	DB 00000000B,00001100B,01100000B	
	DB 00001100B,00001100B,00110000B
	DB 00001100B,11111111B,00110000B
	DB 00001100B,10011001B,00110000B
	DB 00001100B,10011001B,00110000B
	DB 00001100B,10011001B,00110000B
	DB 11111111B,11111111B,11111110B
	DB 11111111B,11111111B,11111110B
	DB 00001100B,10011001B,00110000B
	DB 00001100B,10011001B,00110000B
	DB 00001100B,10011001B,00110000B
	DB 00001100B,11111111B,00110000B
	DB 00001100B,00000000B,00110000B
	DB 00000000B,00000000B,00000000B
	DB 00000000B,00000000B,00000000B
;----------------------------------------
DELAY:
	MOV R5,#03FH									 
DELAY1:
	MOV R6,#01FH
DELAY2:
	MOV R7,#01H
DELAY3:
	DJNZ R7,DELAY3
	DJNZ R6,DELAY2
	DJNZ R5,DELAY1
	RET
END